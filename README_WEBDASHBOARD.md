# nof1.ai風 Webダッシュボード

Qwen3-maxモデルを使用したシミュレーション取引ボットのWebインターフェース

## 特徴

- 🎨 nof1.aiを模倣したダークモードのモダンデザイン
- 📊 リアルタイムダッシュボード（総資産、ROI、PnLなど）
- 💼 現在のポジション表示（含み損益、レバレッジ）
- 📈 取引履歴と累積PnLチャート
- 📉 パフォーマンス統計と資産別分析
- 🧠 AI判断ログ（判断理由の詳細表示）
- ⚡ リアルタイム市場データ更新
- 🎮 ボット制御（開始/停止）

## インストール

### 必要な依存関係

```bash
pip install -r requirements.txt
```

または個別にインストール：

```bash
pip install flask flask-cors requests openai
```

## 使用方法

### 🚀 簡単起動（推奨）

**Windowsの場合:**
`start_dashboard.bat` をダブルクリックするだけ！

**または、コマンドラインから:**

```bash
python web_dashboard.py
```

起動後、以下のメッセージが表示されます：

```
╔════════════════════════════════════════════════════════════════╗
║   nof1.ai風 Webダッシュボード                                  ║
║   Qwen3-max AI取引ボット - シミュレーションモード              ║
╚════════════════════════════════════════════════════════════════╝

📊 過去の市場データを取得中...
✅ BTC: 100本のキャンドルデータを取得
✅ ETH: 100本のキャンドルデータを取得
... (全6銘柄)
✅ 初期データ取得完了

🌐 Webサーバーを起動中...
📊 ブラウザで http://localhost:5000 を開いてください
```

### ブラウザでアクセス

起動後、ブラウザで以下のURLを開いてください：

```
http://localhost:5000
```

**自動起動しない場合は、手動でブラウザを開いてアクセスしてください。**

## ページ構成

### メインダッシュボード (`/`)

- **ポートフォリオサマリー**
  - 総資産、現金、ポジション価値
  - 損益（PnL）とROI
  
- **取引統計**
  - 総取引数、勝ち/負けトレード数
  - 勝率
  
- **市場サマリー**
  - BTC, ETH, SOL, BNB, DOGE, XRPの現在価格
  - 24時間の価格変動
  
- **最近の取引**
  - 最新10件の取引履歴

### ポジション (`/positions`)

- 現在保有中の全ポジション
- 各ポジションの詳細：
  - 数量、平均取得価格、現在価格
  - レバレッジ倍率
  - 含み損益（金額と％）

### 取引履歴 (`/trades`)

- 全取引の詳細リスト
- フィルター機能：
  - 銘柄別
  - アクション別（買い/売り/保持）
  - 表示件数
- 累積PnLチャート（時系列）

### パフォーマンス (`/performance`)

- **総合統計**
  - 総取引数、勝率
  - 総損益、平均損益
  - 最大利益、最大損失
  
- **資産価値の推移チャート**
  - 時系列での総資産価値の変化
  
- **資産別パフォーマンス**
  - 各銘柄ごとの取引統計

### AI判断ログ (`/ai-decisions`)

- AIが行った全ての判断の履歴
- 各判断の詳細：
  - アクション、銘柄、金額、レバレッジ
  - 信頼度スコア
  - 判断理由の全文
  - 損切り/利確価格設定
  - 実行ステータス

## ボット制御

画面右下に固定表示されるボタンで、ボットの開始/停止が可能です：

- **▶ 開始**: 自動取引を開始（2分ごとにAI判断を実行、nof1.ai準拠）
- **⏹ 停止**: 自動取引を停止

## API エンドポイント

### データ取得

- `GET /api/dashboard` - ダッシュボードデータ
- `GET /api/positions` - 現在のポジション
- `GET /api/trades?limit=N` - 取引履歴（最新N件）
- `GET /api/performance` - パフォーマンス統計
- `GET /api/market` - 市場データ
- `GET /api/ai-decisions?limit=N` - AI判断履歴

### ボット制御

- `POST /api/bot/start` - ボット開始
- `POST /api/bot/stop` - ボット停止

### リアルタイム更新

- `GET /api/stream` - SSE（Server-Sent Events）でリアルタイム更新

## データ更新頻度

- **ダッシュボード**: 5秒ごと
- **市場データ**: 10秒ごと
- **取引履歴**: 10秒ごと
- **ポジション**: 5秒ごと
- **パフォーマンス**: 10秒ごと

## 注意事項

### シミュレーションモード

このダッシュボードは**シミュレーションモード**で動作します：

- ✅ リアルタイム市場データを使用（Binance Public API）
- ✅ AI判断は実際に実行
- ✅ ポートフォリオ管理は仮想環境
- ❌ 実際の取引所への注文は行わない
- ❌ 実資金は使用しない

### APIキー

- `qwen3_api.py`の14行目にQWEN3-MAXのAPIキーが設定されていることを確認してください
- 現在の設定：OpenRouter経由でQWEN3-MAXを使用

### ポート設定

デフォルトではポート5000で起動します。変更する場合は`web_dashboard.py`の最終行を編集：

```python
app.run(host='0.0.0.0', port=5000, debug=True, threaded=True)
```

## トラブルシューティング

### ボットが起動しない

```bash
# ログを確認
python web_dashboard.py
```

エラーメッセージを確認してください。

### 市場データが表示されない

- インターネット接続を確認
- Binance APIへのアクセスが可能か確認
- ファイアウォール設定を確認

### AIの判断が実行されない

- OpenRouter APIキーが正しいか確認
- APIの残高があるか確認（https://openrouter.ai/）
- `qwen3_api.py`の設定を確認

## コンソール版との違い

| 機能 | Webダッシュボード | コンソール版 (run_simulation.py) |
|------|------------------|----------------------------------|
| インターフェース | ブラウザGUI | ターミナルテキスト |
| リアルタイム更新 | 自動 | 手動メニュー選択 |
| チャート表示 | あり（Chart.js） | なし |
| 複数ページ | あり（5ページ） | なし |
| リモートアクセス | 可能 | 不可 |
| 同時接続 | 複数可能 | 単一セッション |

## 技術スタック

- **バックエンド**: Flask 3.0+
- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **チャート**: Chart.js 4.4
- **リアルタイム通信**: Server-Sent Events (SSE)
- **データベース**: SQLite
- **AI**: Qwen3-max (OpenRouter経由)

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## サポート

問題が発生した場合は、以下を確認してください：

1. すべての依存関係がインストールされているか
2. APIキーが正しく設定されているか
3. ポート5000が他のアプリケーションで使用されていないか
4. ファイアウォールがポート5000をブロックしていないか

---

**Enjoy trading with AI! 🤖📈**

